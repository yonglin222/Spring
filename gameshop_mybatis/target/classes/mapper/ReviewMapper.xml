<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dw.gameshop_mybatis.mapper.ReviewMapper">
    <resultMap id="Review" type="Review">
        <id property="id" column="id"/>
        <result property="point" column="point"/>
        <result property="reviewText" column="review_text"/>
        <result property="createdAt" column="created_at"/>

        <association property="game" javaType="Game">
            <id property="id" column="id"/>
            <result property="title" column="title"/>

        </association>

        <association property="user" javaType="User">
            <id property="userName" column="user_name"/>
            <association property="authority" javaType="Authority">
                <id property="authorityName" column="authority_name"/>
            </association>
        </association>
    </resultMap>
    <insert id="saveReview" useGeneratedKeys="true" keyProperty="id">
        insert into review (
        game_id,
        user_name,
        point,
        review_text,
        created_at
        ) values
        ( #{game_id}, #{user_name}, #{point}, #{review_text}, #{created_at})
    </insert>
</mapper>